{"version":3,"sources":["scripts/main.js"],"names":["fieldGame","fieldSize","score","button","document","querySelector","fieldRows","querySelectorAll","messageLose","messageWin","addNum","emptyTD","forEach","row","indexR","cell","indexC","push","length","Math","floor","random","r","c","randomNum","updateFieldGame","children","innerHTML","className","endGame","withoutZeros","filter","el","slide","newRow","i","classList","remove","moveLeft","moveRight","reverse","moveUp","moveDown","emptyCell","some","arr","addEventListener","contains","add","e","code"],"mappings":"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","file":"main.21528a4a.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nlet fieldGame = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\nconst fieldSize = 4;\nlet score = 0;\nconst button = document.querySelector('button');\nconst fieldRows = document.querySelectorAll('.field-row');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\n\nbutton.addEventListener('click', () => {\n  if (button.classList.contains('start')) {\n    button.classList.remove('start');\n    button.classList.add('restart');\n    button.innerHTML = 'Restart';\n\n    document.querySelector('.message-start').classList.add('hidden');\n\n    addNum();\n    addNum();\n    updateFieldGame();\n  } else if (button.classList.contains('restart')) {\n    button.classList.remove('restart');\n    button.classList.add('start');\n    button.innerHTML = 'Start';\n\n    document.querySelector('.message-start').classList.remove('hidden');\n\n    fieldGame = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n    messageLose.classList.add('hidden');\n    messageWin.classList.add('hidden');\n    score = 0;\n    updateFieldGame();\n  }\n});\n\nfunction addNum() {\n  const emptyTD = [];\n\n  fieldGame.forEach((row, indexR) => {\n    row.forEach((cell, indexC) => {\n      if (cell === 0) {\n        emptyTD.push([indexR, indexC]);\n      }\n    });\n  });\n\n  if (emptyTD.length === 0) {\n    return;\n  }\n\n  const [r, c] = emptyTD[Math.floor(Math.random() * emptyTD.length)];\n\n  fieldGame[r][c] = randomNum();\n}\n\nfunction updateFieldGame() {\n  for (let r = 0; r < fieldSize; r++) {\n    for (let c = 0; c < fieldSize; c++) {\n      if (fieldGame[r][c] === 0) {\n        fieldRows[r].children[c].innerHTML = '';\n        fieldRows[r].children[c].className = 'field-cell';\n      } else {\n        fieldRows[r].children[c].innerHTML = fieldGame[r][c];\n\n        fieldRows[r].children[c].className = `\n          field-cell field-cell--${fieldGame[r][c]}`;\n      }\n    }\n  }\n\n  endGame();\n  document.querySelector('.game-score').innerHTML = score;\n}\n\nfunction randomNum() {\n  return Math.random() >= 0.5 ? 4 : 2;\n}\n\ndocument.addEventListener('keyup', (e) => {\n  switch (e.code) {\n    case 'ArrowLeft':\n      moveLeft();\n      break;\n\n    case 'ArrowRight':\n      moveRight();\n      break;\n\n    case 'ArrowUp':\n      moveUp();\n      break;\n\n    case 'ArrowDown':\n      moveDown();\n      break;\n  }\n\n  addNum();\n  updateFieldGame();\n});\n\nfunction withoutZeros(row) {\n  return row.filter((el) => el !== 0);\n}\n\nfunction slide(row) {\n  let newRow = row;\n\n  newRow = withoutZeros(newRow);\n\n  for (let i = 0; i < newRow.length - 1; i++) {\n    if (newRow[i] === newRow[i + 1]) {\n      newRow[i] *= 2;\n      newRow[i + 1] = 0;\n      score += newRow[i];\n\n      if (newRow[i] === 2048) {\n        messageWin.classList.remove('hidden');\n      }\n    }\n  }\n\n  newRow = withoutZeros(newRow);\n\n  while (newRow.length < fieldSize) {\n    newRow.push(0);\n  }\n\n  return newRow;\n}\n\nfunction moveLeft() {\n  for (let r = 0; r < fieldSize; r++) {\n    let row = fieldGame[r];\n\n    row = slide(row);\n    fieldGame[r] = row;\n  }\n}\n\nfunction moveRight() {\n  for (let r = 0; r < fieldSize; r++) {\n    let row = fieldGame[r];\n\n    row.reverse();\n    row = slide(row);\n    fieldGame[r] = row.reverse();\n  }\n}\n\nfunction moveUp() {\n  for (let c = 0; c < fieldSize; c++) {\n    let row = [\n      fieldGame[0][c],\n      fieldGame[1][c],\n      fieldGame[2][c],\n      fieldGame[3][c],\n    ];\n\n    row = slide(row);\n\n    for (let r = 0; r < fieldSize; r++) {\n      fieldGame[r][c] = row[r];\n    }\n  }\n}\n\nfunction moveDown() {\n  for (let c = 0; c < fieldSize; c++) {\n    let row = [\n      fieldGame[0][c],\n      fieldGame[1][c],\n      fieldGame[2][c],\n      fieldGame[3][c],\n    ];\n\n    row.reverse();\n    row = slide(row);\n    row.reverse();\n\n    for (let r = 0; r < fieldSize; r++) {\n      fieldGame[r][c] = row[r];\n    }\n  }\n}\n\nfunction endGame() {\n  const emptyCell = fieldGame.some((arr) => arr.some((el) => el === 0));\n\n  if (emptyCell) {\n    return;\n  }\n\n  for (let r = 0; r < fieldSize; r++) {\n    for (let c = 0; c < fieldSize - 1; c++) {\n      if (\n        fieldGame[r][c] === fieldGame[r][c + 1]\n        || fieldGame[c][r] === fieldGame[c + 1][r]\n      ) {\n        return;\n      }\n    }\n  }\n\n  messageLose.classList.remove('hidden');\n}\n"]}